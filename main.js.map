{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util.ts","webpack:///./src/actors/index.ts","webpack:///./src/game.ts","webpack:///./src/images/spritemap.png","webpack:///./src/images/sword.png","webpack:///./src/resources.ts","webpack:///./src/actors/brand/logo.ts","webpack:///./src/actors/enemy/enemy.ts","webpack:///./src/actors/player/player.ts","webpack:///./src/scenes/main-menu/main-menu.ts","webpack:///./src/scenes/level-one/level-one.ts","webpack:///./src/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","p","jsonpArray","window","webpackJsonp","oldJsonpFunction","bind","slice","ex","clamp","min","max","val","clamped","Math","keyToDirection","key","direction","Input","Keys","A","Left","D","Right","S","Down","W","Up","oppositeWay","dir","opp","mode","array","map","Map","maxFreq","item","freq","has","set","addScalarToVec","vec","step","y","x","player_1","Player","enemy_1","Enemy","logo_1","Logo","Game","Engine","[object Object]","width","height","super","displayMode","DisplayMode","FullScreen","loader","start","e","t","excalibur_tiled_1","sword","spritemap","Resources","Sword","Texture","Spritemap","imagePathAccessor","path","tileset","actualPath","replace","console","log","util_1","Label","message","this","strobeClamp","strobe","intensity","ceil","random","opacity","fontFamily","fontSize","color","Color","Actor","initialVelocity","setWidth","setHeight","Red","collisionType","CollisionType","Passive","vel","setTo","wireMap","_map","tryMove","isBlocked","move","speed","pos","newPos","clone","nextCell","getCellByPoint","solid","actors_1","simpleButtonFactory","myButton","document","createElement","textContent","MainMenu","Scene","engine","logo","drawWidth","add","addTimer","Timer","playMe","UIActor","onClick","factory","hide","rootElement","style","display","position","body","appendChild","buttonElement","addEventListener","ctx","canvasHeight","_engine","devicePixelRatio","canvasWidth","left","canvas","offsetLeft","top","offsetTop","buttonWidth","clientWidth","buttonHeight","clientHeight","goToScene","LevelOne","level_one_1","main_menu_1","resources_1","game_1","game","mainMenu","levelOne","sheet","SpriteSheet","player","startX","startY","addDrawing","getSprite","input","keyboard","on","evt","camera","strategy","lockToActor","Loader","addResource","then","terrainMeta","spriteTerrainById","tilesets","forEach","ts","terrains","terrain","tile","properties","reduce","acc","curr","assign","tiles","id","terrainTile","some","tileMap","getTileMap","cell","sprites","spriteId"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([13,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as ex from 'excalibur';\n\n// restrain a value between a min and a max\nconst clamp = (min: number, max: number) => (val: number) => {\n  let clamped = Math.min(val, max);\n  clamped = Math.max(clamped, min);\n  return clamped;\n}\n\ntype Direction = 'left' | 'right' | 'up' | 'down';\n\nconst keyToDirection = (key: number): Direction => {\n  let direction : Direction;\n  if (key === ex.Input.Keys.A || key === ex.Input.Keys.Left) {\n    direction = 'left';\n  }\n  if (key === ex.Input.Keys.D || key === ex.Input.Keys.Right) {\n    direction = 'right';\n  }\n  if (key === ex.Input.Keys.S || key === ex.Input.Keys.Down) {\n    direction = 'down';\n  }\n  if (key === ex.Input.Keys.W || key === ex.Input.Keys.Up) {\n    direction = 'up';\n  }\n  return direction;\n}\n\nconst oppositeWay = (dir: Direction): Direction => {\n  let opp: Direction;\n  switch(dir) {\n    case 'left': opp = 'right'; break;\n    case 'right': opp = 'left'; break;\n    case 'up': opp = 'down'; break;\n    case 'down': opp = 'up'; break;\n  }\n  return opp;\n}\n\n// suggested impl from https://codereview.stackexchange.com/a/169667\nconst mode = (array) => {\n  const map = new Map(); // new Map();\n\n  let maxFreq = 0;\n  let mode;\n\n  for(const item of array) {\n    let freq = map.has(item) ? map.get(item) : 0;\n    freq++;\n\n    if(freq > maxFreq) {\n      maxFreq = freq;\n      mode = item;\n    }\n    \n    map.set(item, freq);\n  }\n\n  return mode;\n};\n\nconst addScalarToVec = (vec: ex.Vector, direction: Direction, step: number) => {\n  switch (direction) {\n    case 'up':\n      vec.y -= step;\n      break;\n    case 'down':\n      vec.y += step;\n      break;\n    case 'left':\n      vec.x -= step;\n      break;\n    case 'right':\n      vec.x += step;\n      break;\n  }\n}\n\nexport {\n  clamp,\n  Direction,\n  keyToDirection,\n  addScalarToVec,\n  oppositeWay,\n  mode\n};\n","import { Player } from './player/player';\nimport { Enemy } from './enemy/enemy';\nimport { Logo } from './brand/logo';\nexport { Player, Enemy, Logo };\n","import * as ex from 'excalibur';\n\nexport class Game extends ex.Engine {\n  constructor(width: number, height: number) {\n    super({ width, height, displayMode: ex.DisplayMode.FullScreen });\n  }\n\n  public start(loader: ex.Loader) {\n    return super.start(loader);\n  }\n}\n","module.exports = __webpack_public_path__ + \"b9b405c74e06d77b7a88f04d6d3ae5cd.png\";","module.exports = __webpack_public_path__ + \"94754f62e0ae4d23d386e246f5e0cb6e.png\";","import * as ex from 'excalibur';\nimport TiledResource from '@excaliburjs/excalibur-tiled';\n\nconst sword = require('./images/sword.png');\nconst spritemap = require('./images/spritemap.png')\n\nlet mapName = 'solidity';\n\nlet Resources = {\n    Sword: new ex.Texture(sword),\n    Spritemap: new ex.Texture(spritemap), // SpriteSheet(spritemap)\n    Map: new TiledResource(`map/${mapName}.json`)\n}\n\nResources.Map.imagePathAccessor = (path, tileset) => {\n    let actualPath = path.replace(/^(?:\\.\\.\\/)+/, \"\");\n    console.log(\"LOAD IMG\", { path, actualPath });\n    return actualPath;\n    // return \"/assets/\" + path;\n}\n\nexport { Resources }\n","import * as ex from 'excalibur';\nimport { clamp } from '../../util';\n\nexport class Logo extends ex.Label {\n  intensity: number;\n  constructor(x: number, y: number, message: string) {\n    super(message);\n    //this.setWidth(200);\n    this.x = x; // (game.drawWidth / 2) - 200;\n    this.y = y; // 400;\n\n    this.fontFamily = 'Arial';\n    this.fontSize = 256;\n\n    this.color = new ex.Color(255,255,255);\n    this.intensity = 150;\n    this.strobe();\n  }\n\n  strobeClamp = clamp(50, 200);\n\n  strobe = () => {\n    this.intensity = this.intensity + Math.ceil(Math.random()*16) - 8;\n    this.intensity = this.strobeClamp(this.intensity);\n    // console.log(\"strobe\", { intensity: this.intensity });\n\n    this.opacity = this.intensity / 255;\n  }\n}\n","import * as ex from 'excalibur';\n\nexport class Enemy extends ex.Actor {\n  constructor({initialVelocity}:{initialVelocity: [number,number]}) {\n    super();\n    this.setWidth(15);\n    this.setHeight(15);\n    this.x = 200;\n    this.y = 200;\n    this.color = ex.Color.Red; // new ex.Color(255, 0, 255);\n\n    // we are collision-aware!\n    this.collisionType = ex.CollisionType.Passive;\n\n    this.vel.setTo(initialVelocity[0], initialVelocity[1]); // 100,140);\n  }\n\n  // draw(ctx: CanvasRenderingContext2D) {\n  //   ctx.fillStyle = this.color.toString()\n  //   ctx.beginPath()\n  //   ctx.arc(this.pos.x, this.pos.y, 10, 0, Math.PI * 2)\n  //   ctx.closePath()\n  //   ctx.fill()\n  // }\n}","import * as ex from 'excalibur';\nimport { Game } from '../../game';\nimport { Direction, oppositeWay, addScalarToVec } from '../../util';\n\nexport class Player extends ex.Actor {\n  speed: number\n  _map: ex.TileMap\n\n  constructor(public x: number, public y: number) { //game: Game) {\n    super();\n    this.setWidth(50);\n    this.setHeight(250);\n    this.color = new ex.Color(255, 255, 255);\n\n    // this.collisionType = ex.CollisionType.Fixed;\n    this.speed = 4;\n  }\n\n  wireMap = (_map : ex.TileMap) => { this._map = _map; }\n\n  tryMove = (direction: Direction) => {\n    const blocked: boolean = this.isBlocked(direction);\n    if (!blocked) { // this.isBlocked(direction)) {\n      this.move(direction);\n    }\n  }\n\n  move = (direction: Direction) => {\n    const step = this.speed;\n    addScalarToVec(this.pos, direction, step);\n  }\n\n  isBlocked = (direction: Direction) => {\n    let newPos = this.pos.clone();\n    addScalarToVec(newPos, direction, this.speed);\n    let nextCell = this._map.getCellByPoint(newPos.x, newPos.y);\n    if (nextCell) {\n      return nextCell.solid;\n    } else {\n      // we are almost off the map?\n      return true;\n    }\n  }\n}\n","import * as ex from 'excalibur';\r\nimport { Logo } from '../../actors';\r\n\r\nconst simpleButtonFactory = (message: string) => {\r\n    let myButton = document.createElement('button');\r\n    myButton.textContent = message; // 'The best button';\r\n    return myButton;\r\n};\r\n\r\nclass Button extends ex.UIActor {\r\n    rootElement: HTMLElement\r\n    buttonElement: HTMLElement\r\n    // onClick: Function\r\n    // _engine: ex.Engine\r\n\r\n    constructor(message, x, y, onClick, factory = simpleButtonFactory) {\r\n        super();\r\n        this.rootElement = document.createElement('div');\r\n        this.rootElement.style.position = 'absolute';\r\n        document.body.appendChild(this.rootElement)\r\n        this.buttonElement = factory(message);\r\n        this.rootElement.appendChild(\r\n            this.buttonElement\r\n        );\r\n        this.buttonElement.addEventListener('click', onClick);\r\n        // this.onClick = onClick;\r\n    }\r\n\r\n    hide = () => this.rootElement.style.display = 'none';\r\n\r\n    draw(ctx: CanvasRenderingContext2D) {\r\n      let canvasHeight = this._engine.canvasHeight / window.devicePixelRatio;\r\n      let canvasWidth = this._engine.canvasWidth / window.devicePixelRatio;\r\n      let left = ctx.canvas.offsetLeft;\r\n      let top = ctx.canvas.offsetTop;\r\n      let buttonWidth = this.buttonElement.clientWidth;\r\n      let buttonHeight = this.buttonElement.clientHeight;\r\n      this.rootElement.style.left = `${left + canvasWidth / 2 - buttonWidth / 2}px`;\r\n      this.rootElement.style.top = `${top + canvasHeight / 2 - buttonHeight / 2 + 100}px`;\r\n    }\r\n}\r\n\r\nexport class MainMenu extends ex.Scene {\r\n    public onInitialize(engine: ex.Engine) {\r\n        const logo = new Logo(\r\n            engine.drawWidth / 2,\r\n            400,\r\n            'Isle'\r\n        );\r\n        this.add(logo);\r\n\r\n        engine.addTimer(\r\n            new ex.Timer(\r\n                logo.strobe,\r\n                20,\r\n                true\r\n            )\r\n        )\r\n                \r\n        const playMe = new Button(\r\n            'start game',\r\n            engine.drawWidth / 2,\r\n            400,\r\n            () => {\r\n                playMe.hide()\r\n                engine.goToScene('wander');\r\n            }\r\n        ); \r\n        // new ex.Label(\r\n        //     'start game',\r\n        //     engine.drawWidth / 2,\r\n        //     400,\r\n        //     'Arial'\r\n        // )\r\n        // engine.input.pointers.primary.on('mousedown', () => {\r\n        //     console.log(\"CLICK\")\r\n        //   engine.goToScene('wander')\r\n        // });\r\n\r\n        this.add(playMe);\r\n    }\r\n}","import * as ex from 'excalibur';\n\nexport class LevelOne extends ex.Scene {\n  public onInitialize(engine: ex.Engine) {\n  }\n  public onActivate() {}\n  public onDeactivate() {}\n}\n","import * as ex from 'excalibur';\nimport { LevelOne } from './scenes/level-one/level-one';\nimport { MainMenu } from './scenes/main-menu/main-menu';\nimport { Player, Enemy, Logo } from './actors';\nimport { Resources } from './resources';\nimport { Game } from './game';\n\nimport { Isle } from './models';\n\nimport { keyToDirection, Direction, mode } from './util';\nimport { TileMap } from 'excalibur';\n\n// const island = new Isle();\n\nconst game = new Game(800, 600);\n\nconst mainMenu = new MainMenu();\ngame.add('main-menu', mainMenu);\n\nconst levelOne = new LevelOne();\n\nconst sheet = new ex.SpriteSheet(Resources.Spritemap, 8, 8, 31, 31);\n\nconst startX = 6, startY = 6;\nconst player = new Player(startX * 32, startY * 32);\n\n\nplayer.addDrawing(sheet.getSprite(7));\n\ngame.input.keyboard.on('press', (evt: ex.Input.KeyEvent) => {\n  let { key } = evt;\n  let direction = keyToDirection(key);\n  player.tryMove(direction);\n})\n\ngame.input.keyboard.on('hold', (evt: ex.Input.KeyEvent) => {\n  let { key } = evt;\n  let direction : Direction = keyToDirection(key);\n  player.tryMove(direction);\n})\n\nlevelOne.add(player);\n\nlevelOne.camera.strategy.lockToActor(player);\n\ngame.add('wander', levelOne);\n\nlet loader = new ex.Loader();\nfor (let key in Resources) {\n  loader.addResource(Resources[key]);\n}\n\ngame.start(loader).then(() => {\n  game.goToScene('wander');\n\n  let _mapRes = Resources.Map;\n  let terrainMeta = {};\n  let spriteTerrainById = {};\n\n  _mapRes.data.tilesets.forEach((ts) => {\n    if (ts.terrains) {\n      ts.terrains.forEach(terrain => {\n        terrainMeta[terrain.tile] = terrain.properties.reduce((acc, curr) => {\n          let { name, value } = curr;\n          return (<any>Object).assign(acc, { [name]: value })\n        }, {});\n      });\n\n      spriteTerrainById = ts.tiles.reduce((acc, curr) => {\n        let { terrain, id } = curr;\n        let terrainTile = {\n          solid: terrain.some(tile => terrainMeta[tile].solid)\n        };\n        return (<any>Object).assign(acc, { [id]: terrainTile });\n      }, {});\n    }\n\n  });\n\n\n  let tileMap: ex.TileMap = Resources.Map.getTileMap();\n\n  tileMap.data.forEach((cell: ex.Cell) => {\n    let tile = spriteTerrainById[cell.sprites[0].spriteId];\n    cell = Object.assign(cell, tile);\n  });\n\n  levelOne.add(tileMap);\n  player.wireMap(tileMap);\n\n  // debugger;\n\n  // levelOne.camera.zoom(1, 1000);\n  // tileMap.collides(player)\n  \n\n});\n\n\n"],"sourceRoot":""}