import * as ex from 'excalibur';
import { Resources } from './resources';
import { GameConfig } from './game_config';
import { setupMaster } from 'cluster';
import { LevelOne } from './scenes/level-one/level-one';
import { Logo } from './actors';

export class Game extends ex.Engine {
  constructor(width: number, height: number, config: GameConfig) {
    super({ width, height, displayMode: ex.DisplayMode.FullScreen });

    this.setup();
  }


  // entrypoint

  public start() {
    let loader = new ex.Loader();
    for (let key in Resources) {
      loader.addResource(Resources[key]);
    }

    //loader.backgroundColor = '#8abec0'
    loader.logo = "data:image/png;base64,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";
      // "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAACACAQAAABOvH+BAAAFUklEQVR4nO2dS5bjIAxFcZ/aR0be/4IYeSXpAXHZ8VfCEjyodyfpU53jyOghxD8EQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEENI8Q20D0Hi90+cEWzKv9zQsdibyrYV9zRq83iHEz79HOAnMLo9hDIudiTGEkCcDsJesyeu9LVQUCSTXx7uvhTHoRQDyis+wCNtb94dQWwJLkL93/YJWBD+KZ3/4bn1syC/or7D9a5n2eUfur0Oe2xdiCGF8y99fXVC5hl0zfj51jju3RlcPzt1fKgY8dfsWud2qCOBXT5Y6LDX8WoqpHoSAnM2HsE7sbIniklQIoESYlBkui0PpG5pw6MV5o1m/4cnIAWqjE2L8zQxyhCCvSefg5BdHNCaAnBxE37zY4ZUz2dGUAJ7VpRQLSosA2/0h/KttgJznoTSGEF5vTTcWZzDIi2YEYNOSxo8IDB7VCWACOKtxlokUelC2QB65wARwjHUeHYvFgGkY779UFUUSOA2ja057NnpXrxvVfwag7AVMw3q8/RiJs45rRf+FXQqNcNXdwLtHjxfj6tJnrMEeRkFEF7eMxwHO29YS4XQfWf6WeHKWhRgLYBqOJZDrfmn9P3v146wFqW23TBJz3qrISKBvgV9N/S5ZS1x9H8n9tW2BHgqW1P/7Ikz/n79YxI/67ocWgI37Z/RFjeAef5oYCDrjb7jIl6YFQJ4DKwD2/8sAKwBShqYFUG5SxwcE+5sWAEYRtk3jAqAEngIrAPlMelQu80KivnzNJ4Nq5O7a7VBIxJsJdu+3Ah4J1FFnza8F11XGW9iwTYCe2HRjcIZ3IwEsgJz1dLMIepKBrwS6aQIW5j2BbTYIpelQAIlW9gdLsNiheAZwE/B8UXX8NAlG5nQJtABs1tX3mBraAS6AJIGnImAcOAdeACFMg1UcMDCmOxoQQAhzHHiaEVACe0x7AZ4DwdulnTlr/j2z6VZprBu4dt92ubeENiXgufaxMQGsWccELh/LpWEBJGYZ9CsB37XPzQsgId+6jtQIyJJaX2uLCKBEoadNYC3FAYxdDY10A2XYnsfh223EcH9nAmjhSBY0OhOARAIcEFrTnQAYBXQUEkDZWkcJyOkwAoRACcjpVAD4oGQiFMAFKE7ypFsBsBGQYSiA68ngv1CbdGCUSLcRoAUQJEABVKX+gtVOZgPbZd6/UGtmgAIAoKYIzJqA+/WAZVu81g6ZqrW11SACSK82Lklr7k/U2M6mvDn06K94RX3tfs1MfPn1Q8vW1gTQAREWt3aVKE7b2l9nCdnqaGuDm9GvKJwEas/x0F8Mbx/8Y9Vdxuub0T0sEAvAqmCXdu6b69uCZC7wuqfzOyzXE8LddT05tlXpBh45aR9o15K7vwha6vz8tXjfYtzjLwzB6enq5kooAP+setvWHv1iPEyOSvdCTu9EAjiTRJ+xNDYQtE+OdK73XItbe0xvtkInASABrE2XDCshsj+xcBpK71bQSQB0MshnNr/MWvztiCf2ygRQAXhQbysGsgSEAkB+BRkl3b+f9bA46MYHoBzgG9u2s3Tt37fD62t3kfIXWAFYSuDO/aUStdkKJCEACWDvJhvHSGq/983o219LnwhCEAugfHfGBmnwv74Z3efNt0KQYzXbCRQBjs1+JrurS2WPOP+ub13NuNTyQjKdjQTmBmet8++s+DxVOP7onXTaPV31IL9R97sCk8/zzZ0t76z/dSEFlMMfJGQY+jILh0vPWFJg9/KzrfVS9uuk2nF/lgBmni9gzCmoq19tqeAJIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEAP+AwVxGTrL66gaAAAAAElFTkSuQmCC";
    loader.logoWidth = 256;
    loader.playButtonText = "Let's go!"
    // null; // Resources.Brand;

    return super.start(loader).then(this.kick);
  }

  // runs on new Game
  protected setup() {
    // console.log("game setup here")
    // initialize island...

    // const levelOne = new LevelOne();
    // this.add(levelOne);
  }

  // runs after loader
  protected kick() {

  } 
}
